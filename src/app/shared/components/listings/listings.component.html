<div *ngIf="listingService.loading$ | async; else listings">
    <div class="absolute h-screen w-screen flex justify-center items-center z-200 bg-white">
        <p class="font-bold text-lg">Loading properties...</p>
    </div>
</div>

<ng-template #listings>
    <div class="flex flex-wrap justify-center gap-5 p-4">
      <div *ngFor="let item of listingService.listing$ | async; trackBy: trackByListingId" class="flex flex-col p-4 w-full sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 gap-3 bg-white rounded-md">
        <div class="flex items-center justify-between">
          <h2 class="font-bold text-xl truncate">{{ item.title }}</h2>
          <p class="font-bold text-sm text-orange-600">
            {{ item.price_per_night }} $
            <fa-icon [icon]="faTags"></fa-icon>
          </p>
        </div>

         <div class="flex justify-center">
          <img 

            [src]="item.photo_url" 
            alt="Property Image" 
            class="w-full h-40 object-cover rounded-md" 
          />
        </div>


        <p class="line-clamp-4 text-sm text-gray-700">
          {{ item.description }}
        </p>
  
        <div class="flex justify-between items-center text-sm text-gray-600">
          <p><fa-icon [icon]="faLocationDot"></fa-icon> {{ item.address }}</p>
        </div>
  
        <div class="flex justify-between text-sm text-gray-600">
          <p><fa-icon [icon]="faBed"></fa-icon> {{ item.num_bedrooms }} Beds</p>
          <p><fa-icon [icon]="faRestroom"></fa-icon> {{ item.num_bathrooms }} Baths</p>
        </div>
  
        <div class="flex justify-between">
          <p class="text-sm text-gray-600"> 
            <fa-icon [icon]="faPeopleGroup"></fa-icon> {{ item.max_guests }} Guests
          </p>
          <div *ngIf="user?.role === 'Tenant'">
            <a routerLink="/views/{{item.listing_id}}" class="py-1 px-2 bg-orange-500 cursor-pointer text-white rounded-lg text-sm">Reserve</a>
          </div>
          <div *ngIf="user?.role === 'Owner'">
            <a routerLink="/view/{{item.listing_id}}" class="py-1 px-2 bg-orange-500 cursor-pointer text-white rounded-lg text-sm">View</a>
          </div>
        </div>
      </div>
    </div>
  </ng-template>